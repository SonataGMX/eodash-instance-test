import{p as B,o as O,g as $,y as R,aw as F,c as m,r as D,d as b,a as j,b as v,ax as H,ay as I,T as U,az as Y,aA as L,aB as z,aC as G,aD as N,w as q,Z as J,a6 as K,aE as W,a1 as p,a3 as C,aF as Z,F as Q,aG as S,aH as k,$ as V,a9 as x,aI as X,aJ as tt,t as T,a0 as M,M as P,aK as et,V as A,aL as at,U as nt,aM as w}from"./index-B0AtdWO1.js";import{m as ot,V as E}from"./VOverlay-Doyabtbe.js";import{b as st,f as rt}from"./forwardRefs-C8xmhcFN.js";import"./transition-m7Uf4INS.js";const it=B({id:String,text:String,...O(ot({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),lt=$()({name:"VTooltip",props:it(),emits:{"update:modelValue":t=>!0},setup(t,i){let{slots:l}=i;const e=R(t,"modelValue"),{scopeId:u}=st(),c=F(),o=m(()=>t.id||`v-tooltip-${c}`),a=D(),n=m(()=>t.location.split(" ").length>1?t.location:t.location+" center"),s=m(()=>t.origin==="auto"||t.origin==="overlap"||t.origin.split(" ").length>1||t.location.split(" ").length>1?t.origin:t.origin+" center"),r=m(()=>t.transition?t.transition:e.value?"scale-transition":"fade-transition"),g=m(()=>b({"aria-describedby":o.value},t.activatorProps));return j(()=>{const y=E.filterProps(t);return v(E,b({ref:a,class:["v-tooltip",t.class],style:t.style,id:o.value},y,{modelValue:e.value,"onUpdate:modelValue":d=>e.value=d,transition:r.value,absolute:!0,location:n.value,origin:s.value,persistent:!0,role:"tooltip",activatorProps:g.value,_disableGlobalStack:!0},u),{activator:l.activator,default:function(){for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];return l.default?.(...f)??t.text}})}),rt({},a)}});function ct(t,i){const l=typeof t=="string"?H(t):t,e=ut(l,i);return{mounted:e,updated:e,unmounted(u){I(null,u)}}}function ut(t,i){return function(l,e,u){const c=typeof i=="function"?i(e):i,o=e.value?.text??e.value??c?.text,a=U(e.value)?e.value:{},n=()=>o??l.textContent,s=(u.ctx===e.instance.$?dt(u,e.instance.$)?.provides:u.ctx?.provides)??e.instance.$.provides,r=Y(t,b(c,a),n);r.appContext=Object.assign(Object.create(null),e.instance.$.appContext,{provides:s}),I(r,l)}}function dt(t,i){const l=new Set,e=c=>{for(const o of c){if(!o)continue;if(o===t)return!0;l.add(o);let a;if(o.suspense?a=e([o.ssContent]):Array.isArray(o.children)?a=e(o.children):o.component?.vnode&&(a=e([o.component?.subTree])),a)return a;l.delete(o)}return!1};if(!e([i.subTree]))throw new Error("Could not find original vnode");const u=Array.from(l).reverse();for(const c of u)if(c.component)return c.component;return i}const _=ct(lt,t=>({activator:"parent",location:t.arg?.replace("-"," "),text:typeof t.value=="boolean"?void 0:t.value})),ft={class:"flex rounded-lg border border-gray-300 dark:border-gray-600",style:{margin:"2px"}},mt=["value"],pt={class:"w-full px-4 pb-3",style:{"font-size":"12px"}},vt=["innerHTML"],wt={__name:"EodashDatePicker",props:{hintText:{type:String,default:null}},setup(t){nt(a=>({cd569fa8:o.value}));const i=L((a,n)=>({get(){return a(),new Date(S.value).getTime()},set(s){n(),k.debug("Datepicker setting currentDate",S.value),S.value=new Date(s).toISOString()}})),l=D({input:"YYYY-MM-DD"}),e=z([]),{selectedStac:u}=G(N());q(u,async(a,n)=>{if(a&&n?.id!==a.id){k.debug("Datepicker selected STAC change triggered");const s=["#009E73","#0072B2","#E69F00","#CC79A7","#56B4E9","#D55E00"];e.splice(0,e.length);for(let r=0;r<w.length;r++){k.debug("Retrieving dates",w[r]),await w[r].fetchCollection();const g=[...new Set(w[r].getItems()?.reduce((y,d)=>{const f=Date.parse(d.datetime);return f&&y.push(new Date(f)),y},[]))];e.push({key:"id-"+r.toString()+Math.random().toString(16).slice(2),bar:{style:{backgroundColor:s[r%s.length]}},dates:g,content:{style:{color:"#000000","font-weight":"bold"}}})}}},{immediate:!0});function c(a){if(e.length){let n=a?1/0:-1/0;e.forEach(s=>{s?.dates&&s.dates.forEach(r=>{r instanceof Date&&(n=Math[a?"min":"max"](n,r.getTime()))})}),i.value=n===-1/0?Date.now():n===1/0?0:n}}const o=D("");return J(()=>{o.value=document.querySelector("eo-dash")?"translate3d(50px,-80px,0)":"translate3d(0px,-80px,0)"}),(a,n)=>(V(),K(Q,null,[v(C(tt),{modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=s=>i.value=s),modelModifiers:{number:!0},masks:l.value,attributes:e},W({default:p(({inputValue:s,inputEvents:r})=>[x("div",ft,[x("input",b({value:s},X(r,!0),{style:{margin:"1px"},class:"flex-grow px-1 py-1 bg-white dark:bg-gray-700"}),null,16,mt)])]),_:2},[t.hintText?{name:"footer",fn:p(()=>[x("div",pt,[x("span",{innerHTML:t.hintText},null,8,vt)])]),key:"0"}:void 0]),1032,["modelValue","masks","attributes"]),v(Z,{align:"center",justify:"center",style:{"margin-top":"6px"}},{default:p(()=>[T((V(),M(A,{style:{padding:"0px","margin-right":"4px"},density:"compact",onClick:n[1]||(n[1]=s=>c(!0))},{default:p(()=>[v(P,{icon:[C(et)]},null,8,["icon"])]),_:1})),[[_,"Set date to oldest available dataset","bottom"]]),T((V(),M(A,{style:{padding:"0px","margin-left":"4px"},density:"compact",onClick:n[2]||(n[2]=s=>c(!1))},{default:p(()=>[v(P,{icon:[C(at)]},null,8,["icon"])]),_:1})),[[_,"Set date to latest available dataset","bottom"]])]),_:1})],64))}};export{wt as default};
