import{p as B,o as O,g as $,y as R,aw as F,c as m,r as D,d as w,a as j,b as g,ax as H,ay as I,T as U,az as Y,U as L,aA as z,aB as G,aC as N,aD as q,w as J,Z as K,$ as C,a6 as W,aE as Z,a1 as p,a3 as S,aF as Q,F as X,aG as k,aH as V,a9 as h,aI as tt,aJ as et,t as T,a0 as M,M as P,aK as at,V as A,aL as nt,aM as b}from"./index-1j1YO71D.js";import{m as ot,V as _}from"./VOverlay-kQ60BXcH.js";import{b as st,f as rt}from"./forwardRefs-uPLgxAcr.js";import"./transition-Bo6mYEoJ.js";const it=B({id:String,text:String,...O(ot({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),lt=$()({name:"VTooltip",props:it(),emits:{"update:modelValue":t=>!0},setup(t,i){let{slots:l}=i;const e=R(t,"modelValue"),{scopeId:u}=st(),c=F(),a=m(()=>t.id||`v-tooltip-${c}`),n=D(),o=m(()=>t.location.split(" ").length>1?t.location:t.location+" center"),s=m(()=>t.origin==="auto"||t.origin==="overlap"||t.origin.split(" ").length>1||t.location.split(" ").length>1?t.origin:t.origin+" center"),r=m(()=>t.transition?t.transition:e.value?"scale-transition":"fade-transition"),v=m(()=>w({"aria-describedby":a.value},t.activatorProps));return j(()=>{const y=_.filterProps(t);return g(_,w({ref:n,class:["v-tooltip",t.class],style:t.style,id:a.value},y,{modelValue:e.value,"onUpdate:modelValue":d=>e.value=d,transition:r.value,absolute:!0,location:o.value,origin:s.value,persistent:!0,role:"tooltip",activatorProps:v.value,_disableGlobalStack:!0},u),{activator:l.activator,default:function(){for(var d=arguments.length,f=new Array(d),x=0;x<d;x++)f[x]=arguments[x];return l.default?.(...f)??t.text}})}),rt({},n)}});function ct(t,i){const l=typeof t=="string"?H(t):t,e=ut(l,i);return{mounted:e,updated:e,unmounted(u){I(null,u)}}}function ut(t,i){return function(l,e,u){const c=typeof i=="function"?i(e):i,a=e.value?.text??e.value??c?.text,n=U(e.value)?e.value:{},o=()=>a??l.textContent,s=(u.ctx===e.instance.$?dt(u,e.instance.$)?.provides:u.ctx?.provides)??e.instance.$.provides,r=Y(t,w(c,n),o);r.appContext=Object.assign(Object.create(null),e.instance.$.appContext,{provides:s}),I(r,l)}}function dt(t,i){const l=new Set,e=c=>{for(const a of c){if(!a)continue;if(a===t||a.el&&t.el&&a.el===t.el)return!0;l.add(a);let n;if(a.suspense?n=e([a.ssContent]):Array.isArray(a.children)?n=e(a.children):a.component?.vnode&&(n=e([a.component?.subTree])),n)return n;l.delete(a)}return!1};if(!e([i.subTree]))return i;const u=Array.from(l).reverse();for(const c of u)if(c.component)return c.component;return i}const E=ct(lt,t=>({activator:"parent",location:t.arg?.replace("-"," "),text:typeof t.value=="boolean"?void 0:t.value})),ft={class:"flex rounded-lg border border-gray-300 dark:border-gray-600",style:{margin:"2px"}},mt=["value"],pt={class:"w-full px-4 pb-3",style:{"font-size":"12px"}},gt=["innerHTML"],bt={__name:"EodashDatePicker",props:{hintText:{type:String,default:null}},setup(t){L(n=>({cd569fa8:a.value}));const i=z((n,o)=>({get(){return n(),new Date(k.value).getTime()},set(s){o(),V.debug("Datepicker setting currentDate",k.value),k.value=new Date(s).toISOString()}})),l=D({input:"YYYY-MM-DD"}),e=G([]),{selectedStac:u}=N(q());J(u,async(n,o)=>{if(n&&o?.id!==n.id){V.debug("Datepicker selected STAC change triggered");const s=["#009E73","#0072B2","#E69F00","#CC79A7","#56B4E9","#D55E00"];e.splice(0,e.length);for(let r=0;r<b.length;r++){V.debug("Retrieving dates",b[r]),await b[r].fetchCollection();const v=[...new Set(b[r].getItems()?.reduce((y,d)=>{const f=Date.parse(d.datetime);return f&&y.push(new Date(f)),y},[]))];e.push({key:"id-"+r.toString()+Math.random().toString(16).slice(2),bar:{style:{backgroundColor:s[r%s.length]}},dates:v,content:{style:{color:"#000000","font-weight":"bold"}}})}}},{immediate:!0});function c(n){if(e.length){let o=n?1/0:-1/0;e.forEach(s=>{s?.dates&&s.dates.forEach(r=>{r instanceof Date&&(o=Math[n?"min":"max"](o,r.getTime()))})}),i.value=o===-1/0?Date.now():o===1/0?0:o}}const a=D("");return K(()=>{a.value=document.querySelector("eo-dash")?"translate3d(50px,-80px,0)":"translate3d(0px,-80px,0)"}),(n,o)=>(C(),W(X,null,[g(S(et),{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=s=>i.value=s),modelModifiers:{number:!0},masks:l.value,attributes:e},Z({default:p(({inputValue:s,inputEvents:r})=>[h("div",ft,[h("input",w({value:s},tt(r,!0),{style:{margin:"1px"},class:"flex-grow px-1 py-1 bg-white dark:bg-gray-700"}),null,16,mt)])]),_:2},[t.hintText?{name:"footer",fn:p(()=>[h("div",pt,[h("span",{innerHTML:t.hintText},null,8,gt)])]),key:"0"}:void 0]),1032,["modelValue","masks","attributes"]),g(Q,{align:"center",justify:"center",style:{"margin-top":"6px"}},{default:p(()=>[T((C(),M(A,{style:{padding:"0px","margin-right":"4px"},density:"compact",onClick:o[1]||(o[1]=s=>c(!0))},{default:p(()=>[g(P,{icon:[S(at)]},null,8,["icon"])]),_:1})),[[E,"Set date to oldest available dataset","bottom"]]),T((C(),M(A,{style:{padding:"0px","margin-left":"4px"},density:"compact",onClick:o[2]||(o[2]=s=>c(!1))},{default:p(()=>[g(P,{icon:[S(nt)]},null,8,["icon"])]),_:1})),[[E,"Set date to latest available dataset","bottom"]])]),_:1})],64))}};export{bt as default};
